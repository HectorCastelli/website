---
import Printable from "@layouts/Printable.astro";
import StyledProse from "@components/StyledProse.astro";
import config from "@config";
import Link from "@components/Link.astro";
import { getCollection } from "astro:content";
import ResumeExperience from "@components/ResumeExperience.astro";

const {author, socialLinks} = config;

const data = {
    title: "Curriculum Vitae",
    description: "A written summary of my career and accomplishments"
}

const experience = (await getCollection("resume-experience")).sort((a,b)=>{
    return b.data.startDate - a.data.startDate
})
---
<Printable frontmatter={data}>
    <header class="text-center [text-wrap:balance]">
      <h1 class="font-bold text-5xl mb-8">{author}</h1>
      <h2 class="font-bold text-xl mb-4">{data.title}</h2>
    </header>
    <aside class="flex flex-row justify-between mb-2" title="contact">
      {
        socialLinks.map((link) => (
          <li class="list-none">
            <Link href={link.link} rel="me">
              {link.name}: {link.printName}
            </Link>
          </li>
        ))
      }
    </aside>
    <hr class="mb-8" />
    <main>
        <section id="experience">
            <header>
                <h1>Professional Experience</h1>
            </header>
            {
                experience.map(e=><ResumeExperience experience={e}/>)
            }
        </section>
        <section id="education">
            <header>
                <h1>education</h1>
            </header>
            <StyledProse></StyledProse>
        </section>
        <section id="awards">
            <header>
                <h1>awards</h1>
            </header>
            <StyledProse></StyledProse>
        </section>
        <section id="skills">
            <header>
                <h1>skills</h1>
            </header>
            <StyledProse></StyledProse>
        </section>
    </main>
  </Printable>
  